databaseChangeLog:
  -   changeSet:
        id: '1.0.0-07-0'
        author: 'd.sagalov'
        comment: 'Create table billing_operations'
        changes:
          - createTable:
              tableName: billing_operations
              schemaName: employee_billing
              remarks: 'Immutable table of all the billing operations of employees formed as a log.'
              columns:
                - column:
                    name: id
                    type: bigint
                    remarks: 'Unique technical id of a billing_operation specific to the employee billing service.'
                    autoIncrement: true
                    constraints:
                      primaryKey: true
                - column:
                    name: public_id
                    type: uuid
                    remarks: 'Globally unique id of a billing operation, generated by the employee billing service.'
                    constraints:
                      nullable: false
                      unique: true
                - column:
                    name: owner_user_id
                    type: bigint
                    remarks: 'Id of a user involved in a billing operation.'
                    constraints:
                      nullable: false
                      foreignKeyName: fk_user_entries_on_billing_operations
                      referencedTableName: users
                      referencedTableSchemaName: employee_billing
                      referencedColumnNames: id
                - column:
                    name: description
                    type: varchar(511)
                    remarks: 'Description with details of a billing operation.'
                    constraints:
                      nullable: false
                - column:
                    name: credit
                    type: bigint
                    remarks: 'Amount taken from a user in the operation.'
                    constraints:
                      nullable: false
                - column:
                    name: debit
                    type: bigint
                    remarks: 'Amount added to a user in the operation.'
                    constraints:
                      nullable: false
                - column:
                    name: billing_cycle_id
                    type: bigint
                    remarks: 'Id of a billing cycle which an operation belongs to.'
                    constraints:
                      nullable: false
                      foreignKeyName: fk_billing_cycle_entries_on_billing_operations
                      referencedTableName: billing_cycles
                      referencedTableSchemaName: employee_billing
                      referencedColumnNames: id
